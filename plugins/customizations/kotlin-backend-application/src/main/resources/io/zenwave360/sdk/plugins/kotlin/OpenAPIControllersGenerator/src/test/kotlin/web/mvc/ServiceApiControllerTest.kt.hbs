package {{layout.adaptersWebPackage}}

import {{openApiApiPackage}}.*
import {{openApiModelPackage}}.*
import {{layout.moduleConfigPackage}}.ServicesInMemoryConfig

import org.junit.jupiter.api.Assertions
import org.junit.jupiter.api.BeforeEach
import org.junit.jupiter.api.Test
import org.slf4j.Logger
import org.slf4j.LoggerFactory

import java.math.*
import java.time.*
import java.util.*

/**
 * Test controller for {{serviceName}}ApiController.
 */
class {{serviceName}}ApiControllerTest {

    private val log: Logger = LoggerFactory.getLogger(javaClass)

    private val context = ServicesInMemoryConfig()

    private val controller = {{serviceName}}ApiController({{#joinWithTemplate entitiesServices delimiter=", "}} context.{{asInstanceName this}}() {{/joinWithTemplate}})

    @BeforeEach
    fun setUp() {
        context.reloadTestData()
    }

{{#each serviceOperations}}
    @Test
    fun {{operationId}}Test() {
        {{{asMethodParametersInitializer operation}}}
        val response = controller.{{operationId}}({{{asMethodParameterValues operation}}})
        Assertions.assertEquals({{statusCode}}, response.statusCode.value())
    }
{{/each}}

}
