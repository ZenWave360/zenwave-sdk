package {{layout.inboundDtosPackage}}

import {{layout.entitiesPackage}}.*
import java.io.Serializable
import java.math.*
import java.time.*
import jakarta.validation.constraints.*

/**
 *
 */
data class {{entity.className}}{{inputDTOSuffix entity}}(
{{#unless (skipEntityId entity)~}}
    val id: {{idJavaType}}? = null,
    val version: Int? = null{{#if (or entity.fields entity.relationships)}},{{/if}}
{{/unless~}}
{{#each entity.fields as |field|}}
    {{{fieldValidationAnnotations field}}}
    {{~#assign "typeSuffix"}}{{#if field.isEntity}}{{inputDTOSuffix entity}}{{/if}}{{/assign}}
    {{~#if @last}}{{#unless ../entity.relationships}}
    val {{field.name}}: {{{fieldType field suffix=typeSuffix}}}{{#unless field.isArray}}?{{/unless}} {{{fieldTypeInitializer field}}}
    {{~else}}
    val {{field.name}}: {{{fieldType field suffix=typeSuffix}}}{{#unless field.isArray}}?{{/unless}} {{{fieldTypeInitializer field}}},
    {{~/unless}}{{~else}}
    val {{field.name}}: {{{fieldType field suffix=typeSuffix}}}{{#unless field.isArray}}?{{/unless}} {{{fieldTypeInitializer field}}},
    {{~/if}}
{{/each}}
{{#each entity.relationships as |relationship|}}
{{#if relationship.fieldName~}}
    {{#if (addRelationshipById relationship entity=entity)}}
    {{~#if @last}}
    val {{relationship.fieldName}}Id: {{idJavaType}}? = null
    {{~else}}
    val {{relationship.fieldName}}Id: {{idJavaType}}? = null,
    {{~/if}}
    {{~else~}}
    {{~#if @last}}
    val {{relationship.fieldName}}: {{{relationshipFieldType relationship suffix=(inputDTOSuffix entity)}}} {{{relationshipFieldTypeInitializer relationship}}}
    {{~else}}
    val {{relationship.fieldName}}: {{{relationshipFieldType relationship suffix=(inputDTOSuffix entity)}}} {{{relationshipFieldTypeInitializer relationship}}},
    {{~/if}}
    {{~/if}}
{{/if~}}
{{/each}}
) {{addExtends entity suffix=(inputDTOSuffix entity)}} : Serializable {

{{#each entity.fields as |field|}}
    {{#assign "typeSuffix"}}{{#if field.isEntity}}{{inputDTOSuffix entity}}{{/if}}{{/assign}}
    {{~#if field.isArray}}
    fun add{{capitalize field.name}}({{field.name}}: {{javaType field}}{{typeSuffix}}): {{entity.className}}{{inputDTOSuffix entity}} {
        this.{{field.name}} += {{field.name}}
        return this
    }
    {{~/if}}
{{/each}}
}
