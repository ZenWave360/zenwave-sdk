{{~#each entities as |entity|}}
    {{~#if (isCrudMethod 'create' method=method entity=entity )}}
        {{> (partial '../../partials/inputInstantiation')~}}
        val {{entity.instanceName}} = {{serviceInstance}}.create{{entity.className}}(input)
        assertNotNull({{entity.instanceName}}.id)
        assertTrue({{entity.instanceName}}Repository.containsEntity({{entity.instanceName}}))
    {{~else if (isCrudMethod 'update' method=method entity=entity )}}
        {{{idFieldInitialization method}}}
        {{> (partial '../../partials/inputInstantiation')~}}
        // assertTrue({{entity.instanceName}}Repository.containsKey(id))
        val {{entity.instanceName}} = {{serviceInstance}}.update{{entity.className}}({{idParamsCallSignature method}}, input)
        assertNotNull({{entity.instanceName}})
        assertTrue({{entity.instanceName}}Repository.containsEntity({{entity.instanceName}}!!))
    {{~else if (isCrudMethod 'list' method=method entity=entity) }}
        // val results = {{serviceInstance}}.list{{entity.classNamePlural}}(PageRequest.of(0, 10))
        // assertNotNull(results)
    {{~else if (isCrudMethod 'get' method=method entity=entity )}}
        {{{idFieldInitialization method}}}
        val {{entity.instanceName}} = {{serviceInstance}}.get{{entity.className}}({{idParamsCallSignature method}})
        assertNotNull({{entity.instanceName}})
    {{~else if (isCrudMethod 'delete' method=method entity=entity )}}
        {{{idFieldInitialization method}}}
        // assertTrue({{entity.instanceName}}Repository.containsKey(id))
        {{serviceInstance}}.delete{{entity.className}}({{idParamsCallSignature method}})
        // assertFalse({{entity.instanceName}}Repository.containsKey(id))
    {{~else~}}
    // TODO: implement this test
    {{~/if}}
{{~/each}}
