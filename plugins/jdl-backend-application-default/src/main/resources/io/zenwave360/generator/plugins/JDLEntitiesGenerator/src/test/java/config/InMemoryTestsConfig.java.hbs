package {{basePackage}}.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Primary;

import {{basePackage}}.core.outbound.{{persistence}}.*;
import {{basePackage}}.core.outbound.search.*;
import {{basePackage}}.infrastructure.{{persistence}}.inmemory.*;


//@Configuration
public class InMemoryTestsConfig {

{{~#each services as |service|}}
  {{~#each service.entities as |entity|}}
    private final {{entity.className}}Repository {{entity.instanceName}}Repository = new {{entity.className}}RepositoryInMemory();
    @Bean @Primary
    public <T extends {{entity.className}}Repository> T {{entity.instanceName}}Repository() {
        return (T) {{entity.instanceName}}Repository;
    }
    {{~#if options.search}}
    @Bean
    @Primary
    public {{entity.className}}SearchRepository {{entity.instanceName}}SearchRepository() {
        return null; // TODO
    }
    {{~/if}}
  {{~/each}}
{{~/each}}

}
